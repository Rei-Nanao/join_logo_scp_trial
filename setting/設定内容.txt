join_logo_scp試行環境の設定

対象ファイル名に含まれる放送局やタイトルによって、join_logo_scpの動作を
変更する設定。


■bat_setup.bat

バッチファイル実行時に使用するファイル名など設定を記載。


■ChList.csv

放送局名と略称の一覧を記載する。CSV形式。
１行に
　項目１：放送局名（認識用）
　項目２：放送局名（設定用）
　項目３：放送局略称
の順で記載。

対象ファイル名に比較項目の文字列が含まれていたら放送局を認識する。
比較項目と比較位置は下記の通り。
　放送局名（認識用）：ファイル名先頭または" _"の後（最優先）
                      括弧、"_"、空白の後（他がない場合）
　放送局略称　　　　：括弧の後で、略称直後は空白か括弧か"_"（最優先）
                      前後共に括弧、"_"、空白のいずれか（他がない場合）
複数候補がある場合は先に現れる側が優先。括弧は全角含め複数種類が使用可能。

・放送局名（設定用）から始まる名前に限定してロゴデータ検出は行われる。
　（jlse_bat.bat書き換えで別項目にも変更可能）
  初期状態では記載なしのため全ロゴデータで検出が行われる。


■JLparam_set1.csv
■JLparam_set2.csv

放送局とタイトルにより変更するjoin_logo_scpの動作設定。CSV形式。

２つのファイルの違いは読み込む順番のみ（set1が先に読み込み）。
設定するデータは上書きされるため最後に設定された内容が有効になる。
１行に
　項目１：（検索用）放送局略称
　項目２：（検索用）タイトル
　項目３以降：（設定用）設定するデータ
の順で記載。

最初の２項目：
項目１は放送局略称と完全一致するか確認し、項目２はタイトル中に含まれるか確認。
記載なければ無条件で一致扱い。
全角半角・大文字小文字は同一扱い。
通常はスペースで区切られた各文字列すべてと比較する（項目１はOR,項目２はAND）。
一部の半角記号（.*+?|[]^）が含まれていたら正規表現として比較する。
そのため、項目内で半角記号を文字として比較したい場合は全角で記載する。
項目１を#から始めた場合はその行全体を無効化。

項目３以降：
最初の２項目が一致した場合、記載のある項目を変数に設定して出力する。
設定変数名は最初の行で指定（設定変数名が#から始まる項目はコメント扱い）。

項目３以降に設定されている各項目の説明：
・JLOGO_CMD
  join_logo_scpの実行スクリプトに何を使うかファイル名を指定。
・JL_FLAGS
  join_logo_scp実行スクリプト内の詳細動作指定。カンマ(,)区切りで複数記載可能。
・JLOGO_OPT1
・JLOGO_OPT2
  join_logo_scpのオプションを記載可能。-CutMrgInや-setなどを指定可能。
  別設定の上書き防止用にJLOGO_OPT1とJLOGO_OPT2の２種類を用意。
・JLOGO_NOLOGO
  CMカットにロゴ検出を使わない場合は1を設定。
・LOGOSUBHEAD
  CMカットとは無関係のロゴ検出する時はロゴ名（パス・拡張子は除く）を指定。
・use_tssplit
  CMカット前にTSファイル加工したい場合のために用意。
・use_intools
  DGIndexやFakeAacWavを使う用途を想定。使う場合は別途ソフト導入が必要。
・tffbff
  L-SMASH WorksのRFF用dominance設定。記載する場合はTFF/BFFいずれか。


■CMカット位置微調整（フラグ指定）

上記設定でJLOGO_CMDにJL_フラグ指定.txt（またはその派生）を指定した時、
JL_FLAGSで現在設定できる内容（試行錯誤中）一覧。
「JL」フォルダの「JL_フラグ指定.txt」書き換えでフラグ内容は追加・変更可能。

・まとめ設定
   ANIMAX   : ANIMAX用設定

・最初のロゴ部分
   HC10   : 最初の10秒は不要
   HC5    : 最初の5秒は不要
   HC3    : 最初の3秒は不要
   HCA    : 最初の3〜10秒で無音シーンチェンジがあれば不要
   HCCM   : 最初に不要カットするロゴ付番宣（15秒か30秒）から始まる
   HCSP   : 最初の番組提供認識をしない
   HRSP15 : 最初の番組提供を15秒最優先で検索
   HFSPL  : 最初の番組提供認識位置を20分近くまで拡張

・番組提供全体
   ASPL   : 番組提供は16〜25秒を検索
   ASPA   : 番組提供は6〜14秒のみ認識
   ASPN   : 番組提供なし

・ロゴなし部分をロゴ扱い
   TI25    : 最終ロゴ終了から60秒離れた構成25秒をロゴありとして追加
   TI15    : 最終ロゴ終了から60秒離れた構成15秒をロゴありとして追加
   TIB     : 最終ロゴ終了から60秒離れた所にある3,5,10秒をロゴありとして追加
   HI210   : 先頭ロゴから210秒はロゴありとする
   HI240   : 先頭ロゴから240秒はロゴありとする

・最後のロゴ部分
   TCFULL : 最後のロゴ部分はすべてカットする（予告認識部分以降をすべてカット）
   TCLAST : 最後のロゴ部分はすべてカットする（予告検出前に実行）
   TCLF30 : 最後のロゴ部分が最後から30秒以内に始まる場合カットする（予告検出前に実行）
   TCL60  : 最後のロゴ区間が60秒だった時カット（予告検出前に実行）
   TCL120 : 最後のロゴ区間が120秒だった時カット（予告検出前に実行）
   TC5    : 最後の5秒は不要
   TCB    : 最後は自動であるが、終了直前の15秒未満１構成をカット
   TCSP   : 最後の番組提供を認識をしない
   TCCM   : 最後は不要カットするロゴ付番宣（15秒か30秒）で終わる
   TCE    : エンドカードなしとする
   TREB   : ロゴ有無に関係なく15秒未満１構成をエンドカードとして残す
   TRE    : ロゴ有無に関係なく5秒以下１構成をエンドカードとして残す
   TLE    : エンドカードはロゴありのみ検出
   TN     : ロゴ通りに出力
   TWTRLOW  : 予告検出推測は弱くする
   TRSP15   : 最後の番組提供を15秒最優先で検索
   TWSP15   : 最後の番組提供が見つからない時15秒で検索
   TRSP15EN : 最後の番組提供を予告後かつロゴ終了直後の15秒で検索
   TSC15    : 予告部分のロゴ開始直後15秒はカット（予告検出前に実行）
   TEC15    : 予告部分のロゴ終了直前15秒はカット（予告検出前に実行）
   TPTRLIM0  : 予告構成数=0
   TPTRLIM2  : 予告構成数=2
   TPCUTTR0  : 予告等終了後のロゴ付き15秒単位構成を残す
   TPCUTTR1  : 予告等終了後のロゴ付き15秒単位構成をカット
   TWSP15R60 : 予告から60秒離れた所にある15秒構成を番組提供が見つからない時残す
   TWTR15R60 : 予告が見つからない時のロゴなし予告検出に15秒構成を含める
   TWTR15A   : TWTR15R60＋条件追加（次の構成が10秒、検索範囲は広げる）
   TRE5R180  : ロゴ有無に関係なく5秒１構成をエンドカードとして残す（ロゴから３分以内）
   TRTRNL15R0 : （ロゴなし時のみ）最終ロゴ扱い終了直後の構成15秒を予告（２回検索）
   TRTRNLR0   : （ロゴなし時のみ）最終ロゴ扱い終了直後の構成15/30秒を予告
   TRTRNLR30  : （ロゴなし時のみ）最終ロゴ扱い終了から30秒離れた構成15/30秒を予告
   TRTRNLR60  : （ロゴなし時のみ）最終ロゴ扱い終了から60秒離れた構成15/30秒を予告
   TRTRNLR90  : （ロゴなし時のみ）最終ロゴ扱い終了から90秒離れた構成15/30秒を予告
   TRTRNLR120 : （ロゴなし時のみ）最終ロゴ扱い終了から120秒離れた構成15/30秒を予告
   TRTRNLR150 : （ロゴなし時のみ）最終ロゴ扱い終了から150秒離れた構成15/30秒を予告

・各ロゴの開始・終了位置部分
   SC15   : 途中のロゴ開始直後に15秒不要部分ありカットする
   EC15   : 途中のロゴ終了直前に15秒不要部分ありカットする
   SC30HT : 途中（中間あたり）のロゴ開始直後に30秒不要部分ありカットする
   EC30HT : 途中（中間あたり）のロゴ終了直前に30秒不要部分ありカットする


■CMカット位置微調整（数値設定）

・あらかじめ開始フレーム位置を設定したら先頭の微妙な判定で精度を上げること可能。
  （録画時の開始マージンや入力ファイル事前処理方法によって変わるので、
    初期状態では未設定。１〜２秒程度までのズレは誤差として動作する）
  設定には２種類の方法あり。
  1. 「JL」フォルダ内「JL_標準.txt」「JL_フラグ指定.txt」等の該当箇所に直接記載
  2. 放送局とタイトルによる設定で「JLOGO_OPT1」または「JLOGO_OPT2」に
     「-set base 198」(198フレーム時の例)

